# Generate a random four digit number.

# The player has to keep inputting four digit numbers until they guess the randomly generated number. After each unsuccessful try it should say how many numbers they got correct, but not which position they got right. At the end of the game should congratulate the user and say how many tries it took.

# Extensions:
# Let the user pick an easy mode which shows the user which position that they guessed correctly
# Let the user pick a hard mode that gives five digits instead of four
# After the game is finished, ask the user for their name and input their score into a table. Show them the high score at the start of the game so that it gives a sense of competition.


import random


scoreboard = {"alice": 5, "bob": 7, "charlie": 3}

def gamemodechoice():
    while True:
        gamemode = input("choose gamemode, e m h: ")
        if gamemode == "e":
            easymode()
            break
        elif gamemode == "m":
            mediummode()
            break
        elif gamemode == "h":
            hardmode()
            break
        else:
            print("invalid choice, please enter 'e', 'm' or 'h'.")

def get_user_input(length):
    while True:
        user_input = input(f"Enter a {length}-digit number: ")
        if user_input.isdigit() and len(user_input) == length:
            return int(user_input)
        else:
            print(f"Invalid input. Please enter a {length}-digit number.")

def easymode():
    computernumber = random.randint(1000,9999)
    tries = 0
    while True:
        userchoice = get_user_input(4)
        tries += 1
        if userchoice == computernumber:
            print(f"Congratulations! You guessed the number {computernumber} in {tries} tries.")
            endgame(tries)
            break
        else:
            print("incorrect")
            correct = 0
            correct_positions = []
            for i in range(4):
                if str(userchoice)[i] == str(computernumber)[i]:
                    correct += 1
                    correct_positions.append(i+1)
            for pos in correct_positions:
                print(f"You got position {pos} correct")
            print(f"You got {correct} correct")

def mediummode():
    computernumber = random.randint(1000,9999)
    tries = 0
    while True:
        userchoice = get_user_input(4)
        tries += 1
        if userchoice == computernumber:
            print(f"Congratulations! You guessed the number {computernumber} in {tries} tries.")
            endgame(tries)
            break
        else:
            print("incorrect")
            correct = 0
            for i in range(4):
                if str(userchoice)[i] == str(computernumber)[i]:
                    correct += 1
            print(f"You got {correct} correct")

def hardmode():
    computernumber = random.randint(10000,99999)
    tries = 0
    while True:
        userchoice = get_user_input(5)
        tries += 1
        if userchoice == computernumber:
            print(f"Congratulations! You guessed the number {computernumber} in {tries} tries.")
            endgame(tries)
            break
        else:
            print("incorrect")
            correct = 0
            for i in range(5):
                if str(userchoice)[i] == str(computernumber)[i]:
                    correct += 1
            print(f"You got {correct} correct")

def endgame(tries):
    print("Thanks for playing!")
    name = input("What is your name? ")
    scoreboard[name] = tries
    print("Scoreboard:")
    for player, score in scoreboard.items():
        print(f"{player}: {score} tries")
    while True:
        playagain = input("Do you want to play again? (y/n) ")
        if playagain == "y":
            gamemodechoice()
            break
        elif playagain == "n":
            print("Goodbye!")
            exit()
        else:
            print("invalid choice")

print("Welcome to the Number Guessing Game!")
print("The current high scores are:")
for player, score in scoreboard.items():
    print(f"{player}: {score} tries")
gamemodechoice()
